---
title: "示例 5.1: Quantum Espresso 100 GPa下碳的自由搜索"
layout: single
classes: wide
lang: zh
lang-ref: example-5-1
sidebar:
  nav: "docs"
---

**下载输入文件：**
[<i class="fas fa-download"></i> C2.cell]({{ '/assets/examples/5.1/C2.cell' | relative_url }}){: .btn .btn--primary .btn--small}
[<i class="fas fa-download"></i> C2.qe]({{ '/assets/examples/5.1/C2.qe' | relative_url }}){: .btn .btn--primary .btn--small}

在这个例子中，我们将探索100 GPa（即1 MBar）下碳的能量景观。作为比较，地球中心的压力约为350 GPa。

这个例子是[示例 2.1]({{ '/zh/tutorials/2.1/' | relative_url }})的DFT类似物，与[示例 3.1]({{ '/zh/tutorials/3.1/' | relative_url }})和[示例 4.1]({{ '/zh/tutorials/4.1/' | relative_url }})相同，除了我们使用Quantum Espresso来松弛结构（而不是CASTEP或VASP）。

#### 近似运行时间：120分钟（串行），40分钟（4个进程并行）

## 先决条件

要运行此示例，您需要安装Quantum Espresso的`pw.x`二进制文件并将其放在您的路径中。此代码不会自动安装为AIRSS软件包的一部分，但可以从[https://www.quantum-espresso.org/download](https://www.quantum-espresso.org/download)下载。Ubuntu用户可以尝试`(sudo) apt install quantum-espresso`。

您还需要碳的赝势。此特定示例已设置为使用来自[PSlibrary](https://dalcorso.github.io/pslibrary/)的Quantum Espresso推荐赝势。使用以下命令下载它：

```console
$ wget https://www.quantum-espresso.org/upf_files/C.pbe-n-rrkjus_psl.1.0.0.UPF
```

使您的当前目录中有`C.pbe-n-rrkjus_psl.1.0.0.UPF`文件。

## 输入文件

检查种子文件`C2.cell`：

```console
$ cat C2.cell

%BLOCK LATTICE_CART
1.709975 0 0
0 1.709975 0
0 0 1.709975
%ENDBLOCK LATTICE_CART

#VARVOL=5

%BLOCK POSITIONS_FRAC
C 0.0 0.0 0.0 # C1 % NUM=1
C 0.0 0.0 0.0 # C2 % NUM=1
%ENDBLOCK POSITIONS_FRAC

#MINSEP=1.3

KPOINTS_MP_SPACING 0.07
```

在此文件中，AIRSS指令`#VARVOL=5`指定生成的晶胞体积为5立方埃，加减5%。单位晶胞中存在两个碳原子，标记为`C1`和`C2`。

AIRSS指令`#MINSEP=1.3`设置最小原子-原子分离为1.3 Å。对于轻元素来说这不是必需的，但对于过渡金属来说，避免核心重叠以防止电子结构收敛不良是很重要的。

最后，指令`KPOINTS_MP_SPACING`设置k点采样密度为0.07，其中0.05更适合金属（或近金属系统）。

文件`C2.qe`包含Quantum Espresso使用的DFT/松弛参数。有关这些参数的信息，请查阅[Quantum Espresso文档](https://www.quantum-espresso.org/Doc/INPUT_PW.html)。


**`C2.qe`：**

```
&CONTROL
  calculation = 'vc-relax' ,
  verbosity = 'low' ,
  restart_mode = 'from_scratch' ,
  nstep = 20 ,
  tstress = .true. ,
  tprnfor = .true. ,
  outdir = './' ,
  prefix = 'xxx' ,
  max_seconds = 1.0D7 ,
  pseudo_dir = './' ,
  etot_conv_thr = 1.0D-5 ,
  forc_conv_thr = 1.0D-3 ,
  disk_io = 'none' ,
/

&SYSTEM
  ecutwfc = 40 ,
  ecutrho = 326 ,
  occupations = 'smearing' ,
  smearing = 'gaussian' ,
  degauss = 1.0D-2 ,
  ibrav = 0 ,
  nat = xxx ,
  ntyp = xxx ,
/

&ELECTRONS
  electron_maxstep = 1000 ,
  conv_thr = 1.0D-6 ,
  diagonalization = 'cg' ,
/

&IONS
  ion_dynamics = 'bfgs' ,
  trust_radius_max = 0.5D0 ,
/

&CELL
  press = xxx ,
  press_conv_thr = 0.5D0 ,
  cell_dynamics = 'bfgs' ,
  cell_dofree = 'all' ,
  cell_factor = 3.0 ,
/

ATOMIC_SPECIES
 C 12.0107 C.pbe-n-rrkjus_psl.1.0.0.UPF
```

## 运行示例

要运行，请使用：

```console
$ airss.pl -press 100 -max 10 -seed C2 -qe
```

命令行选项`-press 100`设置压力为100 GPa，`-max 10`告诉AIRSS生成10个结构，`-seed C2`给出`.cell`输入文件的种子名称（`C2.cell`）。最后一个选项`-qe`告诉AIRSS使用Quantum Espresso进行松弛。

作为进一步的选项，您可以在上述命令中添加例如`-mpinp 4`来并行执行Quantum Espresso，前提是您有`mpirun`且您的`pw.x`二进制文件支持它。

在运行期间，xmgrace可用于绘制"conv"文件以监视进度：`xmgrace *.conv`。这将为每个结构在松弛时生成焓与迭代次数的图表。焓以Rydberg为单位给出。

## 检查输出

运行后，我们可以使用cryan工具（`ca`）获得按焓排序的结构列表。注意，由于AIRSS的随机性，您的确切输出将与此处显示的不同：

```console
$ ca -r

C2-31019-5918-4        100.27     4.794    -165.716   2 C            Fd-3m      1
C2-31019-5918-1         99.97     4.796       0.000   2 C            Fd-3m      1
C2-31019-5918-7         99.95     4.796       0.000   2 C            Fd-3m      1
C2-31019-5918-6        100.00     4.795       0.000   2 C            Fd-3m      1
C2-31019-5918-9         99.98     4.795       0.000   2 C            Fd-3m      1
C2-31019-5918-2         99.94     4.796       0.000   2 C            Fd-3m      1
C2-31019-5918-5         99.86     4.796       0.000   2 C            Fd-3m      1
C2-31019-5918-8        100.08     5.014       2.190   2 C            Pmma       1
C2-31019-5918-3        100.72     4.616       2.484   2 C            P4/mmm     1
```

在这个非常小的晶胞中，发现的大多数结构都是金刚石结构（空间群`Fd-3m`）。如果在较低压力（例如1 GPa）下重复搜索，将找到更多的石墨结构。

---

**上一页：** [示例 4.1: VASP 100 GPa下碳的自由搜索]({{ '/zh/tutorials/4.1/' | relative_url }}) | **下一页：** [示例 5.2: Quantum Espresso 100 GPa下氢的分子单元搜索]({{ '/zh/tutorials/5.2/' | relative_url }})
